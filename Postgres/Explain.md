EXPLAIN

Seq scan - последовательное, блок за блоком, чтение данных таблицы

cost - сферическое понятие затратности операции

ANALYSE считывает определенное количество строк таблицы (выбранное случайно) и собирается статистика по каждой из колонок

Т.е. без ANALYSE мы получаем только ожидания планировщика, а с ANALYSE мы уже учитываем актуальные данные

Если мы выполняем модифицирующие команды, без ANALYSE они не применятся, а с ним применятся

Очищение кэша:

> sudo sync
> sudo su -
# echo 3 > /proc/sys/vm/drop_caches
# exit

Если запускать команду как EXPLAIN (ANALYZE,BUFFERS), то также покажется количество блоков, считанное с диска. При этом shared hit - блоки, счтанные из кэша (растут с каждой выполненной командой)

Можно принудительно запретить seq scan

SET enable_seqscan TO off;


* Seq Scan — читается вся таблица.
* Index Scan — используется индекс для условий WHERE, читает таблицу при отборе строк.
* Bitmap Index Scan — сначала Index Scan, затем контроль выборки по таблице. Эффективно для большого количества строк.
* Index Only Scan — самый быстрый. Читается только индекс.
