Обработка ошибок

https://habr.com/ru/articles/222761/

Try…catch работает синхронно. Чтобы отловить ошибки в асинхронной функции, обработчик должен быть в ней же

https://habr.com/ru/amp/publications/518050/

Для решения задачи обработки ошибок требуется децентрализованный подход. Для всех участков программы, где возможно возникновение ошибки (обращение к файловой системе, соединение с удалённым сервером, создание дочернего процесса и т.д.) необходимо предписать соответствующие сценарии обработки для каждого возможного типа ошибки. Значит, необходимо не только выделить проблемные участки, но и понять каких типов ошибки могут в них возникнуть.
Иногда нужно прокинуть ошибку наверх, чтобы использовать более общий обработчик

Сценарии обработки ошибок:
-Устранение - создать файл, переподключиться к базе
-информирование пользователя и прекращение обработки - ошибка десериализации данных, когда известно, что повторять смысла нет
-повторение операции - при обращении к сервису можно перепослать запрос. Но если у нас сервис промежуточный, то лучше сразу развалиться с ошибкой
-прекращение работы и запись в лог - если непредвиденная ошибка, с которой невозможно продолжать работать - как нехватка памяти
-запись в лог и продолжение работы


Требования к логгеру
1.
2. Отметка времени каждой строки журнала. Это довольно очевидно - вы должны быть в состоянии сказать, когда произошла каждая запись в журнале.
3. Формат записей должен быть легко усваиваемым людьми, а также машинами.
4. Возможность для нескольких настраиваемых потоков назначения. Например, вы можете записывать журналы трассировки в один файл, но при возникновении ошибки запишите в тот же файл, затем в файл ошибок и отправьте электронное письмо одновременно …

